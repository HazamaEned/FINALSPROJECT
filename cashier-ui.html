<?php
/*
session_start();

if (!isset($_SESSION['logged_in']) || $_SESSION['role'] !== 'Cashier') {
    session_destroy(); 
    header("Location: login.php?error=unauthorized");
    exit();
}
*/
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier Panel</title>
    <link rel="stylesheet" href="cashier-ui.css">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="main-content">
        <div id="topnav"></div>

        <div id="CashierUIContainer">
            <div id="LeftArea">
                <div id="Products" class="panel">
                    <div id="ProductSearch">Product Search</div>
                    <div id="SearchBarContainer">
                        <input type="text" id="SearchBar" placeholder="Search products...">
                    </div>
                    <div id="SortControls">
                        <button id="FilterAllBtn" class="sort-btn active" data-filter-type="all">All (A-Z)</button>
                        <button id="FilterRXBtn" class="sort-btn" data-filter-type="rx">RX</button>
                        <button id="FilterOTCBtn" class="sort-btn" data-filter-type="otc">OTC</button>
                    </div>
                    <div id="ProductGrid"></div>
                </div>
            </div>

            <div id="RightArea">
                <div id="CustomerDetailsContainer" class="panel">
                    <div id="CustomerDetailsTitle">Customer Details</div>
                    <div id="CustomerDetails">
                        <div class="info">
                            <div class="info-row">
                                <span class="info-label">Customer Type:</span>
                                <span class="info-value" id="CustomerType">Regular</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">ID Number:</span>
                                <span class="info-value" id="CustomerIdNumber">N/A</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Name:</span>
                                <span class="info-value" id="CustomerName">Generic Customer</span>
                            </div>
                        </div>

                        <div id="IdImageContainer" class="IdImageContainer">
                            <div id="IdImagePreview"></div>
                            <button id="UploadIdBtn">Upload ID Image</button>
                            <button id="RemoveIdBtn" style="display: none;">Remove</button>
                            <input type="file" id="IdImageInput" accept="image/*" style="display:none;">
                        </div>

                        <div id="ScanButtonContainer">
                            <button id="ScanIdBtn">SCAN ID</button>
                        </div>

                        <div id="ApplyDiscountContainer">
                            <input type="checkbox" id="ApplyDiscount">
                            <label for="ApplyDiscount">APPLY PWD/SENIOR CITIZEN DISCOUNT</label>
                        </div>
                    </div>
                </div>

                <div id="Process" class="panel">
                    <div id="ReceiptTitle">Receipt</div>
                    <div id="ReceiptList"></div>
                    <div id="ReceiptTotal">
                        Total: ₱<span id="TotalAmount">0.00</span>
                    </div>
                    <div id="ReceiptButtons">
                        <div>
                            <button id="ProcessPaymentBtn">Process Payment</button>
                            <button id="ResetReceiptBtn">Reset</button>
                        </div>
                        <button id="SendToPharmacistBtn" style="display:none;">Send to Pharmacist</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="PaymentModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Payment Summary</h2>
            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 15px 0;">
            <div id="PaymentDetails">
                <p><b>Gross Subtotal:</b> ₱<span id="GrossSubtotal">0.00</span></p>
                <p><b>VATable Amount:</b> ₱<span id="VATableAmount">0.00</span></p>
                <p><b>VAT (12%):</b> ₱<span id="VATAmount">0.00</span></p>
                <div id="DiscountRow" style="display:none;">
                    <p><b>Discount (20%):</b> -₱<span id="DiscountAmount">0.00</span></p>
                </div>
            </div>
            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 15px 0;">
            <div id="TotalDue">
                <p><b>Total Due:</b> ₱<span id="ModalTotalAmount">0.00</span></p>
            </div>

            <div class="payment-method-section">
                <h3>Select Payment Method</h3>
                <select id="PaymentMethod">
                    <option value="cash">Cash</option>
                    <option value="card">Card</option>
                    <option value="gcash">GCash</option>
                </select>
            </div>

            <div id="CashInputSection" style="display:none;">
                <label for="CashAmount"><b>Cash Given:</b></label>
                <input type="number" id="CashAmount" step="0.01" min="0" placeholder="Enter cash amount">
                <div id="ChangeDisplay"><b>Change:</b> ₱0.00</div>
            </div>

            <div class="modal-actions">
                <button id="ConfirmPaymentBtn">Confirm Payment</button>
                <button id="CancelPaymentBtn">Cancel</button>
            </div>
        </div>
    </div>

    <div id="PrintableReceipt" style="display:none;"></div>

    <script src="jquery.js"></script>
    <script src="jquery-ui-1.14.1/jquery-ui.js"></script>
    <script src="cashier-ui.js"></script>
</body>
</html>
